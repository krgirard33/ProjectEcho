{% extends "base.html" %}

{% block content %}
<h1>Project Echo</h1>
<form method="post" action="{{ url_for('index') }}" class="journal-entry-form">
    <select name="project" class="project-input" aria-label="Select Project (Optional)">
        <option value="">-- Select Project (Optional) --</option>
        {% for project_name in active_projects %}
        <option value="{{ project_name }}">{{ project_name }}</option>
        {% endfor %}
    </select>
    <textarea name="content" rows="4" cols="50" placeholder="What just happened? What's next?"></textarea>
    <br>
    <button type="submit">Log Entry</button>
</form>

<h2>Past Entries</h2>
<div class="entries-by-date">
    {% for date, entries in entries_by_date %}
    <div class="date-section">
        <h3 class="date-header clickable" data-target="entries-{{ date }}">
            {{ date }}
        </h3>

        <div id="entries-{{ date }}" class="entries-content-wrapper hidden">
            <ul class="entries-list" style="list-style-type: none; padding: 0;">
                {% for entry in entries %}
                <li class="entry">
                    <a href="{{ url_for('calendar_bp.edit', entry_id=entry.id) }}">
                        <span class="timestamp">{{ entry.timestamp.split(' ')[1] }}</span>
                        {% if entry.project %}
                        <span class="entry-project">[{{ entry.project }}]</span>
                        {% endif %}
                        - {{ entry.content | format_entry | safe }}
                        {% if entry.time_elapsed %}
                        <span class="time-elapsed">({{ entry.time_elapsed }})</span>
                        {% endif %}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}